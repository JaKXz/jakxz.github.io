import{S as z,i as F,s as G,e as $,k as B,l as U,W as I,c as d,d as c,m as E,b as q,H as b,g as h,o as v,p as J,q as S,n as K,t as k,a as H,h as w,E as M,w as O,x as C,y as L,j as N,B as R}from"../../../chunks/index-b1be73bd.js";import{f as Q}from"../../../chunks/fetchPosts-f08a6680.js";import{p as j,b as V}from"../../../chunks/config-9d8408ac.js";import{a as W,P as X}from"../../../chunks/Pagination-287e15fd.js";import"../../../chunks/preload-helper-60cab3ee.js";function Y(l){let s,a,u,n,r,f,p,_;return{c(){s=$("h1"),a=k("Oops!"),u=B(),n=$("p"),r=k("Sorry, no posts to show here."),f=B(),p=$("a"),_=k("Back to blog"),this.h()},l(e){s=d(e,"H1",{});var P=H(s);a=w(P,"Oops!"),P.forEach(c),u=E(e),n=d(e,"P",{});var o=H(n);r=w(o,"Sorry, no posts to show here."),o.forEach(c),f=E(e),p=d(e,"A",{href:!0});var m=H(p);_=w(m,"Back to blog"),m.forEach(c),this.h()},h(){q(p,"href","/blog")},m(e,P){h(e,s,P),b(s,a),h(e,u,P),h(e,n,P),b(n,r),h(e,f,P),h(e,p,P),b(p,_)},p:M,i:M,o:M,d(e){e&&c(s),e&&c(u),e&&c(n),e&&c(f),e&&c(p)}}}function Z(l){let s,a,u,n,r,f,p,_,e,P,o,m,g,y;return e=new W({props:{currentPage:l[0],totalPosts:l[1]}}),o=new X({props:{posts:l[2]}}),g=new W({props:{currentPage:l[0],totalPosts:l[1]}}),{c(){s=$("h1"),a=k("Posts "),u=k(l[4]),n=k("\u2013"),r=k(l[3]),f=k(" of "),p=k(l[1]),_=B(),O(e.$$.fragment),P=B(),O(o.$$.fragment),m=B(),O(g.$$.fragment)},l(t){s=d(t,"H1",{});var i=H(s);a=w(i,"Posts "),u=w(i,l[4]),n=w(i,"\u2013"),r=w(i,l[3]),f=w(i," of "),p=w(i,l[1]),i.forEach(c),_=E(t),C(e.$$.fragment,t),P=E(t),C(o.$$.fragment,t),m=E(t),C(g.$$.fragment,t)},m(t,i){h(t,s,i),b(s,a),b(s,u),b(s,n),b(s,r),b(s,f),b(s,p),h(t,_,i),L(e,t,i),h(t,P,i),L(o,t,i),h(t,m,i),L(g,t,i),y=!0},p(t,i){(!y||i&16)&&N(u,t[4]),(!y||i&8)&&N(r,t[3]),(!y||i&2)&&N(p,t[1]);const A={};i&1&&(A.currentPage=t[0]),i&2&&(A.totalPosts=t[1]),e.$set(A);const T={};i&4&&(T.posts=t[2]),o.$set(T);const D={};i&1&&(D.currentPage=t[0]),i&2&&(D.totalPosts=t[1]),g.$set(D)},i(t){y||(S(e.$$.fragment,t),S(o.$$.fragment,t),S(g.$$.fragment,t),y=!0)},o(t){v(e.$$.fragment,t),v(o.$$.fragment,t),v(g.$$.fragment,t),y=!1},d(t){t&&c(s),t&&c(_),R(e,t),t&&c(P),R(o,t),t&&c(m),R(g,t)}}}function x(l){let s,a,u,n,r,f,p;document.title=s="Blog - page "+l[0];const _=[Z,Y],e=[];function P(o,m){return o[2].length?0:1}return n=P(l),r=e[n]=_[n](l),{c(){a=$("meta"),u=B(),r.c(),f=U(),this.h()},l(o){const m=I('[data-svelte="svelte-1ech5ty"]',document.head);a=d(m,"META",{"data-key":!0,name:!0,content:!0}),m.forEach(c),u=E(o),r.l(o),f=U(),this.h()},h(){q(a,"data-key","description"),q(a,"name","description"),q(a,"content",V)},m(o,m){b(document.head,a),h(o,u,m),e[n].m(o,m),h(o,f,m),p=!0},p(o,[m]){(!p||m&1)&&s!==(s="Blog - page "+o[0])&&(document.title=s);let g=n;n=P(o),n===g?e[n].p(o,m):(K(),v(e[g],1,1,()=>{e[g]=null}),J(),r=e[n],r?r.p(o,m):(r=e[n]=_[n](o),r.c()),S(r,1),r.m(f.parentNode,f))},i(o){p||(S(r),p=!0)},o(o){v(r),p=!1},d(o){c(a),o&&c(u),e[n].d(o),o&&c(f)}}}const rt=async({fetch:l,params:s})=>{try{const a=s.page?s.page:1;if(a<=1)return{status:301,redirect:"/blog"};let u=a*j-j;const n=await l("/api/posts/count.json"),{total:r}=await n.json(),{posts:f}=await Q({offset:u,page:a});return{status:200,props:{posts:f,page:a,totalPosts:r}}}catch(a){return{status:404,error:a.message}}};function tt(l,s,a){let u,n,{page:r}=s,{totalPosts:f}=s,{posts:p=[]}=s;return l.$$set=_=>{"page"in _&&a(0,r=_.page),"totalPosts"in _&&a(1,f=_.totalPosts),"posts"in _&&a(2,p=_.posts)},l.$$.update=()=>{l.$$.dirty&1&&a(4,u=r*j-(j-1)||1),l.$$.dirty&3&&a(3,n=Math.min(r*j,f))},[r,f,p,n,u]}class lt extends z{constructor(s){super(),F(this,s,tt,x,G,{page:0,totalPosts:1,posts:2})}}export{lt as default,rt as load};
