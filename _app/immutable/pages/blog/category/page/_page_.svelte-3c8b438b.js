import{S as W,i as F,s as G,e as $,k as B,l as T,W as I,c as d,d as c,m as E,b as N,H as k,g as h,o as v,p as J,q as S,n as K,t as b,a as q,h as w,E as D,w as M,x as O,y as z,j as C,B as L}from"../../../../chunks/index-b1be73bd.js";import{f as Q}from"../../../../chunks/fetchPosts-f08a6680.js";import{p as j,b as V}from"../../../../chunks/config-9d8408ac.js";import{a as U,P as X}from"../../../../chunks/Pagination-287e15fd.js";import"../../../../chunks/preload-helper-60cab3ee.js";function Y(r){let s,l,u,a,n,f,p,_;return{c(){s=$("h1"),l=b("Oops!"),u=B(),a=$("p"),n=b("Sorry, no posts to show here."),f=B(),p=$("a"),_=b("Back to blog"),this.h()},l(e){s=d(e,"H1",{});var P=q(s);l=w(P,"Oops!"),P.forEach(c),u=E(e),a=d(e,"P",{});var o=q(a);n=w(o,"Sorry, no posts to show here."),o.forEach(c),f=E(e),p=d(e,"A",{href:!0});var m=q(p);_=w(m,"Back to blog"),m.forEach(c),this.h()},h(){N(p,"href","/blog")},m(e,P){h(e,s,P),k(s,l),h(e,u,P),h(e,a,P),k(a,n),h(e,f,P),h(e,p,P),k(p,_)},p:D,i:D,o:D,d(e){e&&c(s),e&&c(u),e&&c(a),e&&c(f),e&&c(p)}}}function Z(r){let s,l,u,a,n,f,p,_,e,P,o,m,g,y;return e=new U({props:{currentPage:r[0],totalPosts:r[1]}}),o=new X({props:{posts:r[2]}}),g=new U({props:{currentPage:r[0],totalPosts:r[1]}}),{c(){s=$("h1"),l=b("Posts "),u=b(r[4]),a=b("\u2013"),n=b(r[3]),f=b(" of "),p=b(r[1]),_=B(),M(e.$$.fragment),P=B(),M(o.$$.fragment),m=B(),M(g.$$.fragment)},l(t){s=d(t,"H1",{});var i=q(s);l=w(i,"Posts "),u=w(i,r[4]),a=w(i,"\u2013"),n=w(i,r[3]),f=w(i," of "),p=w(i,r[1]),i.forEach(c),_=E(t),O(e.$$.fragment,t),P=E(t),O(o.$$.fragment,t),m=E(t),O(g.$$.fragment,t)},m(t,i){h(t,s,i),k(s,l),k(s,u),k(s,a),k(s,n),k(s,f),k(s,p),h(t,_,i),z(e,t,i),h(t,P,i),z(o,t,i),h(t,m,i),z(g,t,i),y=!0},p(t,i){(!y||i&16)&&C(u,t[4]),(!y||i&8)&&C(n,t[3]),(!y||i&2)&&C(p,t[1]);const H={};i&1&&(H.currentPage=t[0]),i&2&&(H.totalPosts=t[1]),e.$set(H);const R={};i&4&&(R.posts=t[2]),o.$set(R);const A={};i&1&&(A.currentPage=t[0]),i&2&&(A.totalPosts=t[1]),g.$set(A)},i(t){y||(S(e.$$.fragment,t),S(o.$$.fragment,t),S(g.$$.fragment,t),y=!0)},o(t){v(e.$$.fragment,t),v(o.$$.fragment,t),v(g.$$.fragment,t),y=!1},d(t){t&&c(s),t&&c(_),L(e,t),t&&c(P),L(o,t),t&&c(m),L(g,t)}}}function x(r){let s,l,u,a,n,f,p;document.title=s="Blog - page "+r[0];const _=[Z,Y],e=[];function P(o,m){return o[2].length?0:1}return a=P(r),n=e[a]=_[a](r),{c(){l=$("meta"),u=B(),n.c(),f=T(),this.h()},l(o){const m=I('[data-svelte="svelte-86zenk"]',document.head);l=d(m,"META",{"data-key":!0,name:!0}),m.forEach(c),u=E(o),n.l(o),f=T(),this.h()},h(){N(l,"data-key","description"),N(l,"name",V)},m(o,m){k(document.head,l),h(o,u,m),e[a].m(o,m),h(o,f,m),p=!0},p(o,[m]){(!p||m&1)&&s!==(s="Blog - page "+o[0])&&(document.title=s);let g=a;a=P(o),a===g?e[a].p(o,m):(K(),v(e[g],1,1,()=>{e[g]=null}),J(),n=e[a],n?n.p(o,m):(n=e[a]=_[a](o),n.c()),S(n,1),n.m(f.parentNode,f))},i(o){p||(S(n),p=!0)},o(o){v(n),p=!1},d(o){c(l),o&&c(u),e[a].d(o),o&&c(f)}}}const lt=async({fetch:r,params:s})=>{try{const l=s.page?s.page:1;if(l<=1)return{status:301,redirect:"/blog"};let u=l*j-j;const a=await r("/api/posts/count.json"),{total:n}=await a.json(),{posts:f}=await Q({offset:u,page:l});return{status:200,props:{posts:f,page:l,totalPosts:n}}}catch(l){return{status:404,error:l.message}}};function tt(r,s,l){let u,a,{page:n}=s,{totalPosts:f}=s,{posts:p=[]}=s;return r.$$set=_=>{"page"in _&&l(0,n=_.page),"totalPosts"in _&&l(1,f=_.totalPosts),"posts"in _&&l(2,p=_.posts)},r.$$.update=()=>{r.$$.dirty&1&&l(4,u=n*j-(j-1)||1),r.$$.dirty&3&&l(3,a=Math.min(n*j,f))},[n,f,p,a,u]}class rt extends W{constructor(s){super(),F(this,s,tt,x,G,{page:0,totalPosts:1,posts:2})}}export{rt as default,lt as load};
