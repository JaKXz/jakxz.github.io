import{S as V,i as X,s as Y,e as A,k as j,l as K,W as Z,c as C,d as _,m as q,b as I,H as c,g as k,o as H,p as $,q as L,n as x,t as b,a as M,h as y,E as T,w as U,x as W,y as F,j as N,B as G}from"../../../../../chunks/index-effebd35.js";import{f as tt}from"../../../../../chunks/fetchPosts-6cbb4fc1.js";import{p as d,b as et}from"../../../../../chunks/config-a2729e86.js";import{a as Q,P as st}from"../../../../../chunks/Pagination-5606d8e3.js";import"../../../../../chunks/preload-helper-60cab3ee.js";function ot(a){let s,l,p,r,i,u,o,h;return{c(){s=A("h1"),l=b("Oops!"),p=j(),r=A("p"),i=b("Sorry, no posts to show here."),u=j(),o=A("a"),h=b("Back to blog"),this.h()},l(e){s=C(e,"H1",{});var g=M(s);l=y(g,"Oops!"),g.forEach(_),p=q(e),r=C(e,"P",{});var n=M(r);i=y(n,"Sorry, no posts to show here."),n.forEach(_),u=q(e),o=C(e,"A",{href:!0});var m=M(o);h=y(m,"Back to blog"),m.forEach(_),this.h()},h(){I(o,"href","/blog")},m(e,g){k(e,s,g),c(s,l),k(e,p,g),k(e,r,g),c(r,i),k(e,u,g),k(e,o,g),c(o,h)},p:T,i:T,o:T,d(e){e&&_(s),e&&_(p),e&&_(r),e&&_(u),e&&_(o)}}}function at(a){let s,l,p,r,i,u,o,h,e,g,n,m,w,D,B,O,E,R,v,S;return B=new Q({props:{currentPage:a[0],totalPosts:a[2],path:"/blog/category/"+a[1]+"/page"}}),E=new st({props:{posts:a[3]}}),v=new Q({props:{currentPage:a[0],totalPosts:a[2],path:"/blog/category/"+a[1]+"/page"}}),{c(){s=A("h1"),l=b("Category: "),p=b(a[1]),r=j(),i=A("br"),u=j(),o=A("small"),h=b("Posts "),e=b(a[5]),g=b("\u2013"),n=b(a[4]),m=b(" of "),w=b(a[2]),D=j(),U(B.$$.fragment),O=j(),U(E.$$.fragment),R=j(),U(v.$$.fragment)},l(t){s=C(t,"H1",{});var f=M(s);l=y(f,"Category: "),p=y(f,a[1]),r=q(f),i=C(f,"BR",{}),u=q(f),o=C(f,"SMALL",{});var P=M(o);h=y(P,"Posts "),e=y(P,a[5]),g=y(P,"\u2013"),n=y(P,a[4]),m=y(P," of "),w=y(P,a[2]),P.forEach(_),f.forEach(_),D=q(t),W(B.$$.fragment,t),O=q(t),W(E.$$.fragment,t),R=q(t),W(v.$$.fragment,t)},m(t,f){k(t,s,f),c(s,l),c(s,p),c(s,r),c(s,i),c(s,u),c(s,o),c(o,h),c(o,e),c(o,g),c(o,n),c(o,m),c(o,w),k(t,D,f),F(B,t,f),k(t,O,f),F(E,t,f),k(t,R,f),F(v,t,f),S=!0},p(t,f){(!S||f&2)&&N(p,t[1]),(!S||f&32)&&N(e,t[5]),(!S||f&16)&&N(n,t[4]),(!S||f&4)&&N(w,t[2]);const P={};f&1&&(P.currentPage=t[0]),f&4&&(P.totalPosts=t[2]),f&2&&(P.path="/blog/category/"+t[1]+"/page"),B.$set(P);const J={};f&8&&(J.posts=t[3]),E.$set(J);const z={};f&1&&(z.currentPage=t[0]),f&4&&(z.totalPosts=t[2]),f&2&&(z.path="/blog/category/"+t[1]+"/page"),v.$set(z)},i(t){S||(L(B.$$.fragment,t),L(E.$$.fragment,t),L(v.$$.fragment,t),S=!0)},o(t){H(B.$$.fragment,t),H(E.$$.fragment,t),H(v.$$.fragment,t),S=!1},d(t){t&&_(s),t&&_(D),G(B,t),t&&_(O),G(E,t),t&&_(R),G(v,t)}}}function lt(a){let s,l,p,r,i,u,o;document.title=s="Blog - page "+a[0];const h=[at,ot],e=[];function g(n,m){return n[3].length?0:1}return r=g(a),i=e[r]=h[r](a),{c(){l=A("meta"),p=j(),i.c(),u=K(),this.h()},l(n){const m=Z('[data-svelte="svelte-86zenk"]',document.head);l=C(m,"META",{"data-key":!0,name:!0}),m.forEach(_),p=q(n),i.l(n),u=K(),this.h()},h(){I(l,"data-key","description"),I(l,"name",et)},m(n,m){c(document.head,l),k(n,p,m),e[r].m(n,m),k(n,u,m),o=!0},p(n,[m]){(!o||m&1)&&s!==(s="Blog - page "+n[0])&&(document.title=s);let w=r;r=g(n),r===w?e[r].p(n,m):(x(),H(e[w],1,1,()=>{e[w]=null}),$(),i=e[r],i?i.p(n,m):(i=e[r]=h[r](n),i.c()),L(i,1),i.m(u.parentNode,u))},i(n){o||(L(i),o=!0)},o(n){H(i),o=!1},d(n){_(l),n&&_(p),e[r].d(n),n&&_(u)}}}const mt=async({fetch:a,params:s})=>{try{const l=s.page?s.page:1,{category:p}=s;if(l<=1)return{status:301,redirect:`/blog/category/${p}`};let r=l*d-d;const i=await a("/api/posts/count.json"),{total:u}=await i.json(),{posts:o}=await tt({offset:r,page:l});return{status:200,props:{posts:o,page:l,category:p,totalPosts:u}}}catch(l){return{status:404,error:l.message}}};function rt(a,s,l){let p,r,{page:i}=s,{category:u}=s,{totalPosts:o}=s,{posts:h=[]}=s;return a.$$set=e=>{"page"in e&&l(0,i=e.page),"category"in e&&l(1,u=e.category),"totalPosts"in e&&l(2,o=e.totalPosts),"posts"in e&&l(3,h=e.posts)},a.$$.update=()=>{a.$$.dirty&1&&l(5,p=i*d-(d-1)||1),a.$$.dirty&5&&l(4,r=Math.min(i*d,o))},[i,u,o,h,r,p]}class _t extends V{constructor(s){super(),X(this,s,rt,lt,Y,{page:0,category:1,totalPosts:2,posts:3})}}export{_t as default,mt as load};
